import{Bb as N,C as h,Db as E,Fa as a,Fb as l,G as v,Gb as x,H as S,Hb as M,Kb as j,Lb as k,Ma as w,Mb as L,Na as y,Oa as p,Rb as A,Sb as T,Tb as q,Ub as _,Vb as R,X as s,Xa as G,Y as d,bb as C,gb as g,ja as m,ra as o,sa as r,ta as u,wa as b,wb as I,xb as F,zb as c}from"./chunk-P75CTHQT.js";var U=e=>({"border border-danger":e}),X=()=>["/sign-up"],$=(()=>{class e{constructor(n,t,i,f){this.signInBuilder=n,this.router=t,this.authService=i,this.toastr=f,this.isLoggedIn=G(()=>this.authService.isLoggedInSignal()),this.signInForm=this.signInBuilder.group({email:["",[l.required,l.email]],password:["",[l.required,l.pattern("^(?!\\s*$).+")]]}),this.isLoggedIn()&&this.router.navigate(["main"])}onSignInSubmit(){let n={email:this.signInForm.get("email").value,password:this.signInForm.get("password").value};this.signInForm.valid?this.authService.signIn(n).subscribe({next:t=>{this.authService.setToken(t.accessToken,t.refreshToken),this.authService.isLoggedInSignal.set(!0),this.router.navigate(["main"])},error:t=>{this.toastr.error(JSON.stringify(t),"Error Signing in")}}):this.signInForm.markAllAsTouched()}static{this.\u0275fac=function(t){return new(t||e)(d(T),d(I),d(N),d(R))}}static{this.\u0275cmp=v({type:e,selectors:[["app-sign-in"]],standalone:!0,features:[w],decls:24,vars:11,consts:[[1,"container-fluid","router-content","map-container"],[1,"row","h-100","flex-column"],[1,"col"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"card","shadow-lg","p-4",2,"width","500px","border-radius","20px"],[1,"card-body"],[1,"card-title","text-center","mb-4",2,"color","#007bff"],[3,"submit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","placeholder","Enter your email","formControlName","email",1,"form-control",3,"maxlength","ngClass"],[1,"form-group","mt-3"],["for","password"],["type","password","id","password","placeholder","Enter your password","formControlName","password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","btn-block","btn-login","mt-4","w-100",3,"disabled"],[1,"text-center","mt-2"],[1,"text-primary",3,"routerLink"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),a(7," Login "),r(),o(8,"form",7),b("submit",function(){return i.onSignInSubmit()}),o(9,"div",8)(10,"label",9),a(11,"Email"),r(),u(12,"input",10),r(),o(13,"div",11)(14,"label",12),a(15,"Password"),r(),u(16,"input",13),r(),o(17,"button",14),a(18," Sign In "),r()(),o(19,"div",15)(20,"span"),a(21,"Don't have an account? "),r(),o(22,"a",16),a(23,"Sign Up"),r()()()()()()()()),t&2&&(s(8),m("formGroup",i.signInForm),s(4),m("maxlength",250)("ngClass",p(6,U,i.signInForm.get("email").invalid&&i.signInForm.get("email").touched)),s(4),m("ngClass",p(8,U,i.signInForm.get("password").invalid&&i.signInForm.get("password").touched)),s(),m("disabled",i.signInForm.invalid),s(5),m("routerLink",y(10,X)))},dependencies:[_,j,E,x,M,A,k,L,g,C,c,F]})}}return e})();function B(e){let P=e.get("password")?.value,n=e.get("confirmPassword")?.value;return P&&n&&P.trim()!==n.trim()?{passwordMismatch:!0}:null}var V=e=>({"border border-danger":e}),Y=()=>[""],O=(()=>{class e{constructor(n,t,i,f){this.fb=n,this.authService=t,this.router=i,this.toastr=f}ngOnInit(){this.fg=this.fb.group({userName:[null,[l.pattern("^(?!\\s*$).+")]],email:[null,[l.required,l.email,l.pattern("^(?!\\s*$).+")]],password:[null,[l.required,l.pattern("^(?!\\s*$).+")]],confirmPassword:[null,[l.required,l.pattern("^(?!\\s*$).+")]]},{validators:B})}onSubmit(){if(this.fg.invalid){this.fg.markAllAsTouched();return}let n={userName:this.fg.get("userName")?.value,email:this.fg.get("email")?.value,password:this.fg.get("password")?.value};this.authService.signUp(n).subscribe({next:t=>{this.toastr.success("Sign up successful","Success").onHidden.subscribe(()=>{this.router.navigate([""])})},error:t=>{this.toastr.error(JSON.stringify(t),"Error Signing up")}})}static{this.\u0275fac=function(t){return new(t||e)(d(T),d(N),d(I),d(R))}}static{this.\u0275cmp=v({type:e,selectors:[["app-sign-up"]],standalone:!0,features:[w],decls:32,vars:18,consts:[[1,"container-fluid","router-content","map-container"],[1,"row","h-100","flex-column"],[1,"col"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[1,"card","shadow-lg","p-4",2,"width","500px","border-radius","20px"],[1,"card-body"],[1,"card-title","text-center","mb-4",2,"color","#007bff"],[3,"submit","formGroup"],[1,"form-group"],["for","userName"],["type","userName","id","userName","placeholder","enter your user name","formControlName","userName",1,"form-control",3,"maxlength","ngClass"],["for","email"],["type","email","id","email","placeholder","enter your email","formControlName","email",1,"form-control",3,"maxlength","ngClass"],[1,"form-group","mt-3"],["for","password"],["type","password","id","password","placeholder","Enter your password","formControlName","password",1,"form-control",3,"ngClass"],["for","confirm-password"],["type","password","id","confirm-password","placeholder","Enter your password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","btn-block","btn-login","mt-4","w-100",3,"disabled"],[1,"text-center","mt-2"],[1,"text-primary",3,"routerLink"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),a(7," Sign Up "),r(),o(8,"form",7),b("submit",function(){return i.onSubmit()}),o(9,"div",8)(10,"label",9),a(11,"user name"),r(),u(12,"input",10),r(),o(13,"div",8)(14,"label",11),a(15,"Email"),r(),u(16,"input",12),r(),o(17,"div",13)(18,"label",14),a(19,"Password"),r(),u(20,"input",15),r(),o(21,"div",13)(22,"label",16),a(23,"Confirm Password"),r(),u(24,"input",17),r(),o(25,"button",18),a(26," Submit "),r()(),o(27,"div",19)(28,"span"),a(29,"Already have an account? "),r(),o(30,"a",20),a(31,"Sign In"),r()()()()()()()()),t&2&&(s(8),m("formGroup",i.fg),s(4),m("maxlength",250)("ngClass",p(9,V,i.fg.get("userName").invalid&&i.fg.get("userName").touched)),s(4),m("maxlength",250)("ngClass",p(11,V,i.fg.get("email").invalid&&i.fg.get("email").touched)),s(4),m("ngClass",p(13,V,i.fg.get("password").invalid&&i.fg.get("password").touched)),s(4),m("ngClass",p(15,V,i.fg.get("confirmPassword").invalid&&i.fg.get("confirmPassword").touched)),s(),m("disabled",i.fg.invalid),s(5),m("routerLink",y(17,Y)))},dependencies:[_,j,E,x,M,A,k,L,q,g,C,c,F]})}}return e})();var Z=[{path:"sign-up",component:O},{path:"",component:$},{path:"**",redirectTo:""}],J=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[c.forChild(Z),c]})}}return e})();var Se=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=h({imports:[g,J]})}}return e})();export{Se as AuthModule};
